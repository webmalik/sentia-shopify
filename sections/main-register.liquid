<section class="create-account" data-fls-createaccountsection>
  <div class="create-account__content">
    <div class="create-account__image-block">
      {% assign img_href = section.settings.image_link | default: '#' %}
      <a href="{{ img_href }}" class="create-account__link" {% if img_href == '#' %}aria-disabled="true"{% endif %}>
        {% if section.settings.image %}
          <img class="create-account__image ibg"
               src="{{ section.settings.image | img_url: 'master' }}"
               alt="{{ 'customer.register.title' | t | escape }}"
               loading="lazy">
        {% else %}
          <img class="create-account__image ibg" src="./assets/img/login-and-create-account/image.png" alt="Image" loading="lazy">
        {% endif %}
      </a>
    </div>

    <div data-fls-createaccount class="createaccount">
      <div class="createaccount__content">
        <h2 class="createaccount__title">{{ 'customer.register.title' | t }}</h2>

        {%- form 'create_customer', id: 'CreateCustomerForm', class: 'createaccount__form form-createaccount', novalidate: 'novalidate' -%}
          {%- if form.errors -%}
            <div class="form__message">
              <div class="form-status caption-large text-body" role="alert" tabindex="-1" autofocus>
                {{ form.errors | default_errors }}
              </div>
            </div>
          {%- endif -%}

          <div class="form-createaccount__line-block">
            <div class="form-createaccount__first-and-last-name">
              <div class="form-createaccount__name">{{ 'customer.register.first_name' | t }}</div>
              <div class="form-createaccount__line-items">
                <div class="form-createaccount__line-item">
                  <label class="form-createaccount__label-mob" for="CreateFirstName-{{ section.id }}">{{ 'customer.register.first_name' | t }}</label>
                  <input data-fls-input
                         class="form-createaccount__input input"
                         id="CreateFirstName-{{ section.id }}"
                         name="customer[first_name]"
                         type="text"
                         autocomplete="given-name"
                         placeholder="{{ 'customer.register.first_name' | t }}"
                         value="{{ form.first_name }}">
                </div>
                <div class="form-createaccount__line-item">
                  <label class="form-createaccount__label-mob" for="CreateLastName-{{ section.id }}">{{ 'customer.register.last_name' | t }}</label>
                  <input data-fls-input
                         class="form-createaccount__input input"
                         id="CreateLastName-{{ section.id }}"
                         name="customer[last_name]"
                         type="text"
                         autocomplete="family-name"
                         placeholder="{{ 'customer.register.last_name' | t }}"
                         value="{{ form.last_name }}">
                </div>
              </div>
            </div>

            <div class="form-createaccount__line form-createaccount__line--email">
              <label for="CreateEmail-{{ section.id }}" class="form-createaccount__label">{{ 'customer.register.email' | t }}</label>
              <input id="CreateEmail-{{ section.id }}"
                     data-fls-input
                     type="email"
                     name="customer[email]"
                     autocomplete="email"
                     autocapitalize="off"
                     spellcheck="false"
                     placeholder="{{ 'customer.register.email' | t }}"
                     class="form-createaccount__input input"
                     value="{{ form.email }}">
            </div>

            <div class="form-createaccount__line form-createaccount__line--password">
              <label for="CreatePassword-{{ section.id }}" class="form-createaccount__label">{{ 'customer.register.password' | t }}</label>
              <div class="form-createaccount__input-password">
                <input data-fls-input
                       id="CreatePassword-{{ section.id }}"
                       autocomplete="new-password"
                       placeholder="{{ 'customer.register.password' | t }}"
                       type="password"
                       name="customer[password]"
                       class="form-createaccount__input form-createaccount__input input">
                <button data-fls-input-viewpass class="form-createaccount__viewpass --icon-hide" type="button" aria-label="Toggle password"></button>
              </div>
            </div>

            <!-- Newsletter consent (subscription) -->
            <div class="form-createaccount__checkbox-block">
              <label data-fls-checkbox class="form-createaccount__checkbox checkbox">
                <input class="form-createaccount__checkbox-input checkbox__input"
                       type="checkbox"
                       name="customer[accepts_marketing]"
                       value="true">
                <span class="form-createaccount__checkbox-text checkbox__text">Sign me up to the newsletter</span> <!-- немає i18n ключа -->
              </label>
            </div>

            <div class="form-createaccount__button-block">
              <button type="submit" data-fls-button class="form-createaccount__button button button--dark">
                {{ 'customer.register.submit' | t }}
              </button>
            </div>

            <div class="form-createaccount__account-block">
              <div class="form-createaccount__account-text">Already have an account?</div> <!-- немає i18n ключа -->
              <a href="{{ routes.account_login_url }}" class="form-createaccount__account-link">{{ 'customer.log_in' | t }}</a>
            </div>
          </div>
        {%- endform -%}
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Create account",
  "tag": "section",
  "class": "section",
  "settings": [
    { "type": "image_picker", "id": "image", "label": "Side image" },
    { "type": "url", "id": "image_link", "label": "Side image link (optional)" }
  ],
  "presets": [{ "name": "Create account" }]
}
{% endschema %}
