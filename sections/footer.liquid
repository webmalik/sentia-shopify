<footer data-fls-footer class="footer">
  <div class="footer__top top-footer">
    <div class="top-footer__container">
      <div class="top-footer__content">
        <div class="top-footer__subscribe-block">
          <a href="{{ routes.root_url }}" class="top-footer__logo">
            {% if section.settings.logo != blank %}
              <img src="{{ section.settings.logo | image_url }}" alt="{{ section.settings.logo.alt }}">
            {% else %}
              {{ shop.name }}
            {% endif %}
          </a>
          <div data-fls-dynamic=".center-footer__content, 992" class="top-footer__text-and-form">
            {% if section.settings.subscribe_text != blank %}
              <div class="top-footer__text">{{ section.settings.subscribe_text }}</div>
            {% endif %}
            {% form 'customer', class: 'top-footer__subscribe-form subscribeform-footer' %}
              <div class="subscribeform-footer__line-block">
                <div class="subscribeform-footer__line">
                  <input data-fls-input 
					id="NewsletterForm--{{ section.id }}"
                      type="email"
                      name="contact[email]"
                      value="{{ form.email }}"
                      aria-required="true"
                      autocorrect="off"
                      autocapitalize="off"
                      autocomplete="email" placeholder="{{ section.settings.placeholder }}" class="subscribeform-footer__input input">
                </div>
                <button type="submit" class="subscribeform-footer__button"></button>
              </div>
              	{%- if form.errors -%}
                  <p class="subscribeform-form__message" id="Newsletter-error--{{ section.id }}">
                    <span class="svg-wrapper">
                      {{- 'icon-error.svg' | inline_asset_content -}}
                    </span>
                    {{- form.errors.translated_fields.email | capitalize }}
                    {{ form.errors.messages.email -}}
                  </p>
                {%- endif -%}
			  	{%- if form.posted_successfully? -%}
				<p
					class="subscribeform-form__message"
					id="Newsletter-success--{{ section.id }}"
					tabindex="-1"
					autofocus
					>
				<span class="svg-wrapper">
					{{- 'icon-success.svg' | inline_asset_content -}}
				</span>
					{{- 'newsletter.success' | t }}
				</p>
				{%- endif -%}
				{% if section.settings.policy_text != blank %}
					<div class="subscribeform-footer__policy">{{ section.settings.policy_text }}</div>
				{% endif %}
            {% endform %}
          </div>
        </div>

        <div class="top-footer__block">
          {% for block in section.blocks %}
            <div class="top-footer__column">
              {% if block.settings.title != blank %}
                <div class="top-footer__title">{{ block.settings.title }}</div>
              {% endif %}
              {% if block.settings.menu != blank %}
                <ul class="top-footer__list">
                  {% for link in linklists[block.settings.menu].links %}
                    <li class="top-footer__item">
                      <a href="{{ link.url }}" class="top-footer__link">{{ link.title }}</a>
                    </li>
                  {% endfor %}
                </ul>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>

  <div class="footer__center center-footer">
    <div class="center-footer__container">
      <div class="center-footer__content"></div>
    </div>
  </div>

  <div class="footer__bottom bottom-footer">
    <div class="bottom-footer__container">
      <div class="bottom-footer__content">
        <div class="bottom-footer__copy">{{ section.settings.copyright }}</div>
        <div class="bottom-footer__autor-block">
          {% if section.settings.author_link != blank %}
            <a href="{{ section.settings.author_link }}" class="bottom-footer__autor-link">{{ section.settings.author_label }}</a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</footer>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.querySelector('.top-footer__subscribe-form');
    if (!form) return;

    const input = form.querySelector('input[type="email"]');
    const button = form.querySelector('button[type="submit"]');

    const validateEmail = (email) => {
      const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return regex.test(email);
    };

    const toggleButtonState = () => {
      const isValid = validateEmail(input.value.trim());
      button.disabled = !isValid;
    };

    input.addEventListener('input', toggleButtonState);
    toggleButtonState(); 
  });
</script>

{% schema %}
{
  "name": "Custom Footer",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Footer logo"
    },
    {
      "type": "text",
      "id": "subscribe_text",
      "label": "Subscribe text",
      "default": "Sign up to receive updates about our products and collaborations."
    },
    {
      "type": "text",
      "id": "placeholder",
      "label": "Email input placeholder",
      "default": "Your email"
    },
    {
      "type": "text",
      "id": "policy_text",
      "label": "Policy text under form",
      "default": "By signing up, you agree to our Privacy Policy"
    },
    {
      "type": "text",
      "id": "copyright",
      "label": "Copyright text",
      "default": "Â© 2025 Sentia Home. All rights reserved"
    },
    {
      "type": "url",
      "id": "author_link",
      "label": "Author link"
    },
    {
      "type": "text",
      "id": "author_label",
      "label": "Author name"
    }
  ],
  "blocks": [
    {
      "type": "footer_column",
      "name": "Footer column",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Column title"
        },
        {
          "type": "link_list",
          "id": "menu",
          "label": "Menu"
        }
      ]
    }
  ],
  "max_blocks": 5,
  "presets": [
    {
      "name": "Custom Footer",
      "category": "Footer"
    }
  ]
}

{% endschema %}